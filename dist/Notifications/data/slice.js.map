{"version":3,"file":"slice.js","names":["createSlice","RequestStatus","IDLE","IN_PROGRESS","SUCCESSFUL","FAILED","DENIED","initialState","notificationStatus","appName","appsId","apps","notifications","tabsCount","showNotificationsTray","pagination","slice","name","reducers","fetchNotificationDenied","state","fetchNotificationFailure","fetchNotificationRequest","fetchNotificationSuccess","_ref","payload","newNotificationIds","notificationsKeyValuePair","existingNotificationIds","Array","from","Set","concat","_toConsumableArray","_objectSpread","count","fetchNotificationsCountDenied","fetchNotificationsCountFailure","fetchNotificationsCountRequest","fetchNotificationsCountSuccess","_ref2","countByAppName","appIds","markNotificationsAsSeenRequest","markNotificationsAsSeenSuccess","markNotificationsAsSeenDenied","markNotificationsAsSeenFailure","markAllNotificationsAsReadRequest","markAllNotificationsAsReadSuccess","updatedNotifications","Object","fromEntries","entries","map","_ref3","_ref4","_slicedToArray","key","notification","lastRead","Date","toISOString","markAllNotificationsAsReadDenied","markAllNotificationsAsReadFailure","markNotificationsAsReadRequest","markNotificationsAsReadSuccess","_ref5","date","id","markNotificationsAsReadDenied","markNotificationsAsReadFailure","resetNotificationStateRequest","updateAppNameRequest","_ref6","currentPage","updatePaginationRequest","_slice$actions","actions","notificationsReducer","reducer"],"sources":["../../../src/Notifications/data/slice.js"],"sourcesContent":["/* eslint-disable no-param-reassign */\nimport { createSlice } from '@reduxjs/toolkit';\n\nexport const RequestStatus = {\n  IDLE: 'idle',\n  IN_PROGRESS: 'in-progress',\n  SUCCESSFUL: 'successful',\n  FAILED: 'failed',\n  DENIED: 'denied',\n};\n\nconst initialState = {\n  notificationStatus: RequestStatus.IDLE,\n  appName: 'discussion',\n  appsId: [],\n  apps: {},\n  notifications: {},\n  tabsCount: {},\n  showNotificationsTray: false,\n  pagination: {},\n};\nconst slice = createSlice({\n  name: 'notifications',\n  initialState,\n  reducers: {\n    fetchNotificationDenied: (state) => {\n      state.notificationStatus = RequestStatus.DENIED;\n    },\n    fetchNotificationFailure: (state) => {\n      state.notificationStatus = RequestStatus.FAILED;\n    },\n    fetchNotificationRequest: (state) => {\n      state.notificationStatus = RequestStatus.IN_PROGRESS;\n    },\n    fetchNotificationSuccess: (state, { payload }) => {\n      const {\n        newNotificationIds, notificationsKeyValuePair, pagination,\n      } = payload;\n      const existingNotificationIds = state.apps[state.appName];\n      state.apps[state.appName] = Array.from(new Set([...existingNotificationIds, ...newNotificationIds]));\n      state.notifications = { ...state.notifications, ...notificationsKeyValuePair };\n      state.tabsCount.count -= state.tabsCount[state.appName];\n      state.tabsCount[state.appName] = 0;\n      state.notificationStatus = RequestStatus.SUCCESSFUL;\n      state.pagination = pagination;\n    },\n    fetchNotificationsCountDenied: (state) => {\n      state.notificationStatus = RequestStatus.DENIED;\n    },\n    fetchNotificationsCountFailure: (state) => {\n      state.notificationStatus = RequestStatus.FAILED;\n    },\n    fetchNotificationsCountRequest: (state) => {\n      state.notificationStatus = RequestStatus.IN_PROGRESS;\n    },\n    fetchNotificationsCountSuccess: (state, { payload }) => {\n      const {\n        countByAppName, appIds, apps, count, showNotificationsTray,\n      } = payload;\n      state.tabsCount = { count, ...countByAppName };\n      state.appsId = appIds;\n      state.apps = apps;\n      state.showNotificationsTray = showNotificationsTray;\n      state.notificationStatus = RequestStatus.SUCCESSFUL;\n    },\n    markNotificationsAsSeenRequest: (state) => {\n      state.notificationStatus = RequestStatus.IN_PROGRESS;\n    },\n    markNotificationsAsSeenSuccess: (state) => {\n      state.notificationStatus = RequestStatus.SUCCESSFUL;\n    },\n    markNotificationsAsSeenDenied: (state) => {\n      state.notificationStatus = RequestStatus.DENIED;\n    },\n    markNotificationsAsSeenFailure: (state) => {\n      state.notificationStatus = RequestStatus.FAILED;\n    },\n    markAllNotificationsAsReadRequest: (state) => {\n      state.notificationStatus = RequestStatus.IN_PROGRESS;\n    },\n    markAllNotificationsAsReadSuccess: (state) => {\n      const updatedNotifications = Object.fromEntries(\n        Object.entries(state.notifications).map(([key, notification]) => [\n          key, { ...notification, lastRead: new Date().toISOString() },\n        ]),\n      );\n      state.notifications = updatedNotifications;\n      state.notificationStatus = RequestStatus.SUCCESSFUL;\n    },\n    markAllNotificationsAsReadDenied: (state) => {\n      state.notificationStatus = RequestStatus.DENIED;\n    },\n    markAllNotificationsAsReadFailure: (state) => {\n      state.notificationStatus = RequestStatus.FAILED;\n    },\n    markNotificationsAsReadRequest: (state) => {\n      state.notificationStatus = RequestStatus.IN_PROGRESS;\n    },\n    markNotificationsAsReadSuccess: (state, { payload }) => {\n      const date = new Date().toISOString();\n      state.notifications[payload.id] = { ...state.notifications[payload.id], lastRead: date };\n      state.notificationStatus = RequestStatus.SUCCESSFUL;\n    },\n    markNotificationsAsReadDenied: (state) => {\n      state.notificationStatus = RequestStatus.DENIED;\n    },\n    markNotificationsAsReadFailure: (state) => {\n      state.notificationStatus = RequestStatus.FAILED;\n    },\n    resetNotificationStateRequest: () => initialState,\n    updateAppNameRequest: (state, { payload }) => {\n      state.appName = payload.appName;\n      state.pagination.currentPage = 1;\n    },\n    updatePaginationRequest: (state) => {\n      state.pagination.currentPage += 1;\n    },\n  },\n});\n\nexport const {\n  fetchNotificationDenied,\n  fetchNotificationFailure,\n  fetchNotificationRequest,\n  fetchNotificationSuccess,\n  fetchNotificationsCountDenied,\n  fetchNotificationsCountFailure,\n  fetchNotificationsCountRequest,\n  fetchNotificationsCountSuccess,\n  markNotificationsAsSeenRequest,\n  markNotificationsAsSeenSuccess,\n  markNotificationsAsSeenFailure,\n  markNotificationsAsSeenDenied,\n  markAllNotificationsAsReadDenied,\n  markAllNotificationsAsReadRequest,\n  markAllNotificationsAsReadSuccess,\n  markAllNotificationsAsReadFailure,\n  markNotificationsAsReadDenied,\n  markNotificationsAsReadRequest,\n  markNotificationsAsReadSuccess,\n  markNotificationsAsReadFailure,\n  resetNotificationStateRequest,\n  updateAppNameRequest,\n  updatePaginationRequest,\n} = slice.actions;\n\nexport const notificationsReducer = slice.reducer;\n"],"mappings":"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"}